<openerp>
    <data>

        <!-- 公交行车规则输出tree视图 -->
        <record model="ir.ui.view" id="bus_work_rule_output_tree">
            <field name="name">bus work rule output tree</field>
            <field name="model">route_manage.route_manage</field>
            <field name="priority">1</field>
            <field name="arch" type="xml">
                <tree string="Course Tree" create="0" open="0" delete="0">
                    <field name="department_id"/>
                    <field name="line_name"/>
                    <button type="object" string="create rule" name="outputRule"></button>
                </tree>
            </field>
        </record>

        <!-- 公交行车规则输出form视图 -->
        <record id="bus_work_rule_output_form" model="ir.ui.view">
            <field name="name">bus work rule manage form</field>
            <field name="model">scheduleplan.schedulrule</field>
            <field name="priority">1</field>
            <field name="arch" type="xml">
                <form create="0">
                </form>
            </field>
        </record>

        <!-- 公交行车规则输出action页面 -->
        <record model="ir.actions.act_window" id="bus_work_rule_output_action">
            <field name="name">bus work rule output</field>
            <field name="res_model">route_manage.route_manage</field>
            <field name="view_mode">tree,form</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('bus_work_rule_output_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('bus_work_rule_output_form')})
                ]"/>
            <field name="context" eval="{'bustype': 'normal'}"/>
            <field name="domain">[('bus_type', '=', 'regular_bus')]</field>
        </record>


        <!-- 公交行车规则管理form视图 -->
        <record id="bus_work_rule_manage_form" model="ir.ui.view">
            <field name="name">bus work rule manage form</field>
            <field name="model">scheduleplan.schedulrule</field>
            <field name="priority">0</field>
            <field name="arch" type="xml">
                <form create="0">
                    <div class="oe_title">
                        <label for="name" class="oe_edit_only"/>
                        <h1>
                            <field name="name"/>
                        </h1>
                    </div>
                    <group>
                        <group>
                            <field name="line_id"/>
                            <field name="bustype"/>
                            <field name="schedule_method"/>
                            <field name="mileage"/>
                            <field name="bus_number"/>
                            <field name="date_type" options="{'no_open': True, 'no_create': True}"/>
                        </group>
                        <group>
                            <field name="upfirsttime"/>
                            <field name="uplasttime"/>
                            <field name="downfirsttime"/>
                            <field name="downlasttime"/>
                            <field name="upstation"/>
                            <field name="downstation"/>
                            <field name="autogen"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="up work plan">
                            <div id="up_plan_chart_container"></div>
                            <div>
                                <div>
                                    <div>
                                        <h2>行车规则输出</h2>
                                    </div>
                                </div>
                                <field name="upplanvehiclearrange">
                                    <tree editable="bottom">
                                        <field name="vehiclemode" options="{'no_open': True, 'no_create': True}"/>
                                        <field name="workingnumber" sum="working_amount"/>
                                        <field name="backupnumber" sum="backup_amount"/>
                                        <field name="passengernumber" readonly="1"/>
                                        <field name="allvehicles" sum="allvehicles"/>
                                    </tree>
                                    <form>
                                        <group>
                                            <field name="vehiclemode" options="{'no_open': True, 'no_create': True}"/>
                                            <field name="workingnumber"/>
                                            <field name="backupnumber"/>
                                            <field name="allvehicles"/>
                                        </group>
                                    </form>
                                </field>
                            </div>
                            <div>
                                <div>
                                    <div>
                                        <h2>上行</h2>
                                    </div>
                                </div>
                                <field name="uptimearrange">
                                    <tree default_order="seqid" editable="bottom">
                                        <field name="seqid"/>
                                        <field name="starttime"/>
                                        <field name="endtime"/>
                                        <field name="interval"/>
                                        <field name="speed"/>
                                        <field name="worktimelength"/>
                                        <field name="resttime"/>
                                        <field name="minvehicles"/>
                                        <field name="rateoffullload"/>
                                        <field name="mark"/>
                                        <field name="spanday"/>
                                    </tree>
                                    <form>
                                        <group>
                                            <group>
                                                <field name="starttime"/>
                                                <field name="endtime"/>
                                                <field name="interval"/>
                                                <field name="speed"/>
                                                <field name="worktimelength"/>
                                            </group>
                                            <group>
                                                <field name="resttime"/>
                                                <field name="minvehicles"/>
                                                <field name="rateoffullload"/>
                                                <field name="mark"/>
                                                <field name="spanday"/>
                                            </group>
                                        </group>
                                    </form>
                                </field>
                            </div>
                        </page>
                        <page string="down work plan" attrs="{'invisible': [('schedule_method', '=', 'singleway')]}">
                            <div id="down_plan_chart_container"></div>
                            <div>
                                <div>
                                    <div>
                                        <h2>行车规则输出</h2>
                                    </div>
                                </div>
                                <field name="downplanvehiclearrange">
                                    <tree editable="bottom">
                                        <field name="vehiclemode" options="{'no_open': True, 'no_create': True}"/>
                                        <field name="workingnumber" sum="working_amount"/>
                                        <field name="backupnumber" sum="backup_amount"/>
                                        <field name="passengernumber" readonly="1"/>
                                        <field name="allvehicles" sum="allvehicles"/>
                                    </tree>
                                    <form>
                                        <group>
                                            <field name="vehiclemode" options="{'no_open': True, 'no_create': True}"/>
                                            <field name="workingnumber"/>
                                            <field name="backupnumber"/>
                                            <field name="allvehicles"/>
                                        </group>
                                    </form>
                                </field>
                            </div>
                            <div>
                                <div>
                                    <div>
                                        <h2>下行</h2>
                                    </div>
                                </div>
                                <field name="downtimearrange">
                                    <tree default_order="seqid" editable="bottom">
                                        <field name="seqid"/>
                                        <field name="starttime"/>
                                        <field name="endtime"/>
                                        <field name="interval"/>
                                        <field name="speed"/>
                                        <field name="worktimelength"/>
                                        <field name="resttime"/>
                                        <field name="minvehicles"/>
                                        <field name="rateoffullload"/>
                                        <field name="mark"/>
                                        <field name="spanday"/>
                                    </tree>
                                    <form>
                                        <group>
                                            <group>
                                                <field name="starttime"/>
                                                <field name="endtime"/>
                                                <field name="interval"/>
                                                <field name="speed"/>
                                                <field name="worktimelength"/>
                                            </group>
                                            <group>
                                                <field name="resttime"/>
                                                <field name="minvehicles"/>
                                                <field name="rateoffullload"/>
                                                <field name="mark"/>
                                                <field name="spanday"/>
                                            </group>
                                        </group>
                                    </form>
                                </field>
                            </div>
                        </page>
                        <page string="big site setting up">
                            <field name="bigsite_up">
                                <tree create="0" delete="0" editable="1">
                                    <field name="site_id" readonly="1"/>
                                    <field name="needsign"/>
                                    <field name="needchecking"/>
                                    <field name="tolastsit_low"/>
                                    <field name="tolastsit_flat"/>
                                    <field name="tolastsit_peak"/>
                                    <field name="fastthen"/>
                                    <field name="slowthen"/>
                                </tree>
                                <form>
                                    <group>
                                        <group>
                                            <field name="site_id" readonly="1"
                                                   options="{'no_open': True, 'no_create': True}"/>
                                            <field name="needsign"/>
                                            <field name="needchecking"/>
                                            <field name="tolastsit_low"/>
                                        </group>
                                        <group>
                                            <field name="tolastsit_flat"/>
                                            <field name="tolastsit_peak"/>
                                            <field name="fastthen"/>
                                            <field name="slowthen"/>
                                        </group>
                                    </group>
                                </form>
                            </field>
                        </page>
                        <page string="big site setting down">
                            <field name="bigsite_down">
                                <tree create="0" delete="0" editable="1">
                                    <field name="site_id" readonly="1"/>
                                    <field name="needsign"/>
                                    <field name="needchecking"/>
                                    <field name="tolastsit_low"/>
                                    <field name="tolastsit_flat"/>
                                    <field name="tolastsit_peak"/>
                                    <field name="fastthen"/>
                                    <field name="slowthen"/>
                                </tree>
                                <form>
                                    <group>
                                        <group>
                                            <field name="site_id" readonly="1"
                                                   options="{'no_open': True, 'no_create': True}"/>
                                            <field name="needsign"/>
                                            <field name="needchecking"/>
                                            <field name="tolastsit_low"/>
                                        </group>
                                        <group>
                                            <field name="tolastsit_flat"/>
                                            <field name="tolastsit_peak"/>
                                            <field name="fastthen"/>
                                            <field name="slowthen"/>
                                        </group>
                                    </group>
                                </form>
                            </field>
                        </page>
                    </notebook>
                </form>
            </field>
        </record>


        <!-- 公交行车规则管理tree视图 -->
        <record model="ir.ui.view" id="bus_work_rule_manage_tree">
            <field name="name">bus work rule manage tree</field>
            <field name="model">scheduleplan.schedulrule</field>
            <field name="priority">0</field>
            <field name="arch" type="xml">
                <tree string="Course Tree">
                    <field name="name"/>
                    <field name="line_id"/>
                    <field name="bustype"/>
                    <field name="schedule_method"/>
                    <field name="bus_number"/>
                    <field name="upfirsttime"/>
                    <field name="uplasttime"/>
                    <field name="downfirsttime"/>
                    <field name="downlasttime"/>
                    <button type="object" string="create move time" name="createMoveTimeTable"></button>
                </tree>
            </field>
        </record>

        <!-- 公交行车规则管理action页面 -->
        <record model="ir.actions.act_window" id="bus_work_rule_manage_action">
            <field name="name">bus work rule manage</field>
            <field name="res_model">scheduleplan.schedulrule</field>
            <field name="view_mode">tree,form</field>
            <field name="context" eval="{'bustype': 'normal'}"/>
            <field name="domain">[('bustype', '=', 'normal')]</field>
        </record>

        <!-- 定制公交行车规则输出action页面 -->
        <record model="ir.actions.act_window" id="custem_bus_work_rule_output_action">
            <field name="name">custem bus work rule output</field>
            <field name="res_model">route_manage.route_manage</field>
            <field name="view_mode">tree,form</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('bus_work_rule_output_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('bus_work_rule_output_form')})
                ]"/>
            <field name="context" eval="{'bustype': 'custem'}"/>
            <field name="domain">[('bus_type', '=', 'custem_bus')]</field>
        </record>

        <!-- 定制公交行车规则管理action页面 -->
        <record model="ir.actions.act_window" id="custem_bus_work_rule_manage_action">
            <field name="name">custem bus work rule manage</field>
            <field name="res_model">scheduleplan.schedulrule</field>
            <field name="view_mode">tree,form</field>
            <field name="context" eval="{'bustype': 'custem'}"/>
            <field name="domain">[('bustype', '=', 'custem')]</field>
        </record>

        <!-- 行车时刻表action页面 -->
        <record model="ir.actions.act_window" id="bus_move_time_table_action">
            <field name="name">bus move time table</field>
            <field name="res_model">scheduleplan.busmovetime</field>
            <field name="view_mode">tree,form</field>
            <!--<field name="context">{'record_ids':5}</field>-->
        </record>

        <!-- 行车时刻表tree视图 -->
        <record model="ir.ui.view" id="bus_move_time_table_tree">
            <field name="name">bus move time table tree</field>
            <field name="model">scheduleplan.busmovetime</field>
            <field name="priority">0</field>
            <field name="arch" type="xml">
                <tree create="0">
                    <field name="executedate"/>
                    <field name="line_id"/>
                    <field name="rule_id"/>
                    <field name="schedule_method"/>
                    <field name="plan_totaltimes"/>
                    <field name="real_times"/>
                </tree>
            </field>
        </record>

        <!--行车时刻表form表单-->
        <record id="bus_move_time_table_form" model="ir.ui.view">
            <field name="name">bus move time table form</field>
            <field name="model">scheduleplan.busmovetime</field>
            <field name="priority">0</field>
            <field name="arch" type="xml">
                <form create="0">
                    <div class="oe_title">
                        <label for="name" class="oe_edit_only"/>
                        <h1>
                            <field name="name"/>
                        </h1>
                    </div>
                    <div style="display:none" id="the_rec_id">
                        <field name="id"/>
                    </div>
                    <group>
                        <group>
                            <field name="line_id"/>
                            <field name="vehiclenums"/>
                            <field name="backupvehicles"/>
                        </group>
                        <group>
                            <field name="rule_id"/>
                            <field name="executedate"/>
                            <field name="schedule_method" invisible="1"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="up move time">
                            <field name="uptimeslist">
                                <tree>
                                    <field name="seqid"/>
                                    <field name="startmovetime"/>
                                    <field name="arrive_time"/>
                                    <field name="timelength"/>
                                    <field name="mileage"/>
                                    <field name="line_id"/>
                                    <field name="start_site"/>
                                    <field name="end_site"/>
                                </tree>
                            </field>
                        </page>
                        <page string="down move time" attrs="{'invisible': [('schedule_method', '=', 'singleway')]}">
                            <field name="downtimeslist">
                                <tree>
                                    <field name="seqid"/>
                                    <field name="startmovetime"/>
                                    <field name="arrive_time"/>
                                    <field name="timelength"/>
                                    <field name="mileage"/>
                                    <field name="line_id"/>
                                    <field name="start_site"/>
                                    <field name="end_site"/>
                                </tree>
                            </field>
                        </page>
                        <page string="operation plan" name="operation_plan_page">
                            <div>
                                <ul class="sort_title">
                                    <li>班次</li>
                                </ul>
                            </div>
                            <div class='opera_sort'>
                                <ul class="sort_bus_num">
                                    <li>1</li>
                                    <li>2</li>
                                    <li>3</li>
                                    <li>4</li>
                                </ul>
                                <ul class="sort_top">
                                    <li>1</li>
                                    <li>2</li>
                                    <li>3</li>
                                    <li>4</li>
                                </ul>

                                <ul class="sort_down">
                                    <li>a1</li>
                                    <li>a2</li>
                                    <li>a3</li>
                                    <li>a4</li>
                                </ul>
                                <ul class="sort_top">
                                    <li>5</li>
                                    <li>6</li>
                                    <li>7</li>
                                    <li>8</li>
                                </ul>
                                <ul class="sort_down">
                                    <li>a5</li>
                                    <li>a6</li>
                                    <li>a7</li>
                                    <li>a8</li>
                                </ul>
                                <ul class="sort_top">
                                    <li>9</li>
                                    <li>10</li>
                                    <li>11</li>
                                    <li>12</li>
                                </ul>
                                <ul class="sort_down">
                                    <li>a9</li>
                                    <li>a10</li>
                                    <li>a11</li>
                                    <li>a12</li>
                                </ul>
                                <ul class="sort_top">
                                    <li>13</li>
                                    <li>14</li>
                                    <li>15</li>
                                    <li>16</li>
                                </ul>
                                <ul class="sort_down">
                                    <li>a13</li>
                                    <li>a14</li>
                                    <li>a15</li>
                                    <li>a16</li>
                                </ul>
                            </div>
                            <link rel="stylesheet" href="/bus_schedule_plan/static/src/css/operation_plan.css"/>
                            <script src="/bus_schedule_plan/static/src/js/operation_plan.js"
                                    type="text/javascript">
                            </script>
                        </page>
                    </notebook>
                </form>
            </field>
        </record>

        <!-- 普通公交行车规则输出 -->
        <menuitem id="normal_bus_rule_output_menu" name="normal bus rule output menu"
                  parent="operation_menu.bus_working_plan_menu"
                  sequence="1"/>

        <!-- 行车规则输出 -->
        <menuitem id="bus_work_rule_output_menu" name="bus work rule output menu"
                  parent="normal_bus_rule_output_menu" action="bus_work_rule_output_action"
                  sequence="1"/>

        <!-- 行车规则管理 -->
        <menuitem id="bus_work_rule_manage_menu" name="bus work rule manage menu"
                  parent="normal_bus_rule_output_menu" action="bus_work_rule_manage_action"
                  sequence="2"/>

        <!-- 定制公交行车规则输出 -->
        <menuitem id="custem_bus_rule_output_menu" name="custem bus rule output menu"
                  parent="operation_menu.bus_working_plan_menu"
                  sequence="2"/>

        <!-- 行车规则输出 定制公交 -->
        <menuitem id="custem_bus_work_rule_output_menu" name="custem bus work rule output menu"
                  parent="custem_bus_rule_output_menu" action="custem_bus_work_rule_output_action"
                  sequence="1"/>

        <!-- 行车规则管理 定制公交 -->
        <menuitem id="custem_bus_work_rule_manage_menu" name="custem bus work rule manage menu"
                  parent="custem_bus_rule_output_menu" action="custem_bus_work_rule_manage_action"
                  sequence="2"/>

        <!-- 行车时刻表 -->
        <menuitem id="bus_move_time_menu" name="bus move time table menu"
                  parent="operation_menu.bus_working_plan_menu"
                  action="bus_move_time_table_action"
                  sequence="3"/>

    </data>
</openerp>