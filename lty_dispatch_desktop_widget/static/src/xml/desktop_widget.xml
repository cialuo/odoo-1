<?xml version="1.0" encoding="UTF-8"?>

<templates xml:space="preserve">
    <t t-name="bus_real_info_template">
        <div>
            <div class="bus_real_info">
                <div class="boxTitle">
                    <div class="closeBox"><a class="close_bt" href="javascript:;"></a></div>
                    <div class="titleInfo infoL">
                        <table>
                            <tr>
                                <td rowspan="2"><span class="licenseNumber fmax">车号：<t t-esc="widget.data.license_number"></t></span></td>
                                <td><span class="licensePlate"><t t-esc="widget.data.license_plate"></t></span></td>
                            </tr>
                            <tr>
                                <td><span class="driver">司机：<t t-esc="widget.data.driver"></t></span><span class="crew">乘务：<t t-esc="widget.data.crew"></t></span></td>
                            </tr>
                        </table>
                    </div>
                    <div class="titleInfo infoR">
                        <div class="operation">
                            <div class="scene scene1">
                                <span class="sceneTitle">操作</span>
                                <ul class="operationNav">
                                    <li><a class="back_to_the_field" href="javascript:;">回场</a></li>
                                    <li><a class="start" href="javascript:;">发车</a></li>
                                    <li><a class="sign" href="javascript:;">签到</a></li>
                                </ul>
                            </div>
                            <div class="scene scene1">
                                <span class="sceneTitle">交互</span>
                                <ul class="operationNav">
                                    <li><a class="news" href="javascript:;">消息</a></li>
                                    <li><a class="notice" href="javascript:;">通知</a></li>
                                    <li><a class="conversation" href="javascript:;">通话</a></li>
                                </ul>
                            </div>
                            <a href="javascript:;" class="scene scene2 video">视频</a>
                            <a href="javascript:;" class="scene scene2 police">报警</a>
                            
                        </div>
                        <div class="more">
                            <span class="sceneMore">更多</span>
                            <ul class="morebox">
                                <li><a class="arrivalTime" href="javascript:;">到站时刻</a></li>
                                <li><a class="InformationInteraction" href="javascript:;">信息交互</a></li>
                                <li><a class="geographicalPosition" href="javascript:;">地理位置</a></li>
                                <li><a class="moreInfo" href="javascript:;">更多信息</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="popupContent">
                    <div class="vehicleInformation">
                        <table>
                            <tr>
                                <td>乘客<span class="fmax num"><t t-esc="widget.data.passenger"></t></span>人</td>
                                <td>满载率<span class="num"><t t-esc="widget.data.full_load_rate"></t></span></td>
                                <td>满意度<span class="num"><t t-esc="widget.data.satisfaction_degree"></t></span></td>
                            </tr>
                            <tr>
                                <td>车厢<span class="fmax num"><t t-esc="widget.data.carriage_temperature"></t></span>度</td>
                                <td>室外<span class="num"><t t-esc="widget.data.outdoor_temperature"></t></span>度</td>
                                <td>满意度<span class="num"><t t-esc="widget.data.satisfaction_degree_2"></t></span></td>
                            </tr>
                            <tr>
                                <td>后门<span class="fmax num"><t t-esc="widget.data.back_door"></t></span></td>
                                <td>前门<span class="num danger fmax"><t t-esc="widget.data.front_door"></t></span></td>
                                <td>当前车速<span class="num"><t t-esc="widget.data.speed"></t></span></td>
                            </tr>
                            <tr>
                                <td>驶向<span class="fmax num"><t t-esc="widget.data.sail"></t></span></td>
                                <td>前车<span class="num"><t t-esc="widget.data.front"></t></span></td>
                                <td>后车<span class="num"><t t-esc="widget.data.after_door"></t></span></td>
                            </tr>
                            <tr>
                                <td>回场时间<span class="dangerTime num"><t t-esc="widget.data.back_field_time"></t></span></td>
                                <td>下趟发车<span class="num"><t t-esc="widget.data.next_train_departure"></t></span></td>
                                <td>技术状况<span class="num"><t t-esc="widget.data.status"></t></span></td>
                            </tr>
                        </table>
                    </div>
                    <div class="carReport">
                        
                    </div>
                </div>
                <div class="lineInfo">
                    <span class="lineRoad"><t t-esc="widget.data.line"></t>路</span>
                    第<t t-esc="widget.data.trip"></t>趟，共<t t-esc="widget.data.total_trip"></t>趟
                </div>
            </div>
            <script type="text/javascript">
                $(function(){
                    $('.operation .scene1').hover(function(){
                        $(this).find('.operationNav').show();
                    },function(){
                        $(this).find('.operationNav').hide();
                    });

                    $('.infoR .more').hover(function(){
                        $(this).find('.morebox').show(150);
                    },function(){
                        $(this).find('.morebox').hide();
                    });
                });
            </script>
        </div>
    </t>

    <t t-name="arrival_time_chart_template">
        <div>
            <div class="carInfoScene carzxt" style="width:344px;height:330px;"></div>
        </div>
    </t>

    <t t-name="arrival_time_video_template">
        <div>
            <div class="carInfoScene" style="text-align:center;font-size:24px;color:red;">暂时空白（没有监控接口）</div>
        </div>
    </t>

    <t t-name="arrival_time_police_template">
        <div>
            <div class="carInfoScene policeTemplate">
                <h1 class="title"><img src="/lty_dispatch_desktop_widget/static/src/image/police.png" alt=""/>报警模式</h1>
                <p class="cont">启动报警模式后，该车会将报警模式前后10分钟及报警模式过程中的全部视频做保留，并上传至视频流媒体服务器。配合后续调查取证</p>
                <a class="onBt" href="javascript:;">启动报警模式</a>
                <ul class="tel">
                    <li>110</li>
                    <li>120</li>
                    <li>119</li>
                </ul>
            </div>
        </div>
    </t>

    <t t-name="arrival_time_more_info_template">
        <div>
            待开发
        </div>
    </t>

    <t t-name="arrival_time_map_template">
        <div>
            <div class="carInfoScene" >
                <img width="344" height="330" t-attf-src="http://restapi.amap.com/v3/staticmap?location={{widget.data.longitude}},{{widget.data.latitude}}&amp;zoom=14&amp;size=344*330&amp;markers=large,,:{{widget.data.longitude}},{{widget.data.latitude}}&amp;key=cf2cefc7d7632953aa19dbf15c194019&amp;scale=2" alt="" />
            </div>
        </div>
    </t>

    <t t-name="passenger_flow_template">
        <div>
            <div class="passenger_flow_trend_chart" >
                <t t-foreach="widget.passenger_data" t-as="passenger">
                    <div t-attf-class="trend_chart trend_chart_single" t-if="passenger.name">
                        <div class="top_title"> 
                            <span class="name mR10">
                                <t t-esc="passenger.name"></t>
                            </span>
                            <span class="mR10">
                                <t t-esc="passenger.line_car.join()"></t>路
                            </span>客流走势图
                            <a class="express_bt" href="javascript:;">发出越站客车</a>
                        </div>
                        <div class="passenger_flow_cont"></div>
                    </div>
                    <div t-attf-class="trend_chart trend_chart_summary" t-else="">
                        <div class="top_title">
                            <span class="mR10">
                                <t t-esc="passenger.line_car.join()"></t>
                            </span>汇总客流走势图
                        </div>
                        <div class="passenger_flow_cont"></div>
                    </div>
                </t>
            </div>
        </div>
    </t>

    <t t-name="trend_chart_template">
        <div class="trend_chart_info">
            <div class="trend_chart_map" style="width:466px;height:214px;" ></div>
            <ul class="map_botton_info">
                <li><span class="num red" t-attf-style="{{widget.passenger_data}}">
                    <t t-esc="widget.passenger_data[1].value[2]"></t>
                </span>滞站候车</li>
                <li><span class="num blue"><t t-esc="widget.passenger_data[2].value[1]"></t></span>0.5h上车</li>
                <li><span class="num gray"><t t-esc="widget.passenger_data[3].value[1]"></t></span>0.5h下车</li>
            </ul>
        </div>
    </t>

    <t t-name="express_train_template">
        <div>
            <div class="express_train_box">
                <div class="express_train" >
                    <header class="title">配发越站快车</header>
                    <form action="" class="express_train_content" id="express_train_content_id">
                        <div class="express_train_part">
                            <table class="express_train_info">
                                <tr>
                                    <td>
                                        <label class="labw"><input type="radio" class="bus_mode" name="bus_mode" value="vehicle" />从机动车配车</label>
                                        <label class="labw"><input class="bus_mode" type="radio" name="bus_mode" value="waiting_bus" />从待班车配车</label>
                                    </td>
                                    <td>
                                        <input type="time" required="required" t-att-value="widget.express_info.arrival_time"/>抵达<span class="name">
                                            <t t-esc="widget.express_info.name"></t>
                                        </span>
                                    </td>
                                </tr>
                            </table>
                            <select name="bus" class="select_bus" required="required">
                                <option value="">请选择</option>
                                <t t-foreach="widget.express_info.vehicle" t-as="vehicle">
                                    <option t-att-value="vehicle.id" class="opset vehicle_op">
                                        <t t-esc="vehicle.name"></t>
                                    </option>
                                </t>
                                <t t-foreach="widget.express_info.waiting_bus" t-as="waiting_bus">
                                    <option t-att-value="waiting_bus.id" class="waiting_bus_op opset">
                                        <t t-esc="waiting_bus.name"></t>
                                    </option>
                                </t>
                            </select>
                        </div>
                        <div class="select_part">
                            <title class="title">经停方式</title>
                            <table class="select_part_info">
                                <tr>
                                    <td>
                                        <label class="labw">
                                            <input type="radio" class="stopping_mode" name="stopping_mode" value="whole"/>全部经停
                                        </label>
                                    </td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td>
                                        <label class="labw"><input type="radio" class="stopping_mode" name="stopping_mode" value="skip"/>越站经停</label>
                                    </td>
                                    <td>
                                        <div class="showInfo">
                                            <p class="skip_info">
                                                首站捡客后越至第<input min="1" type="number" t-att-value="widget.express_info.skip"/>站开始全部经停
                                            </p>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td valign="top">
                                        <label class="labw"><input type="radio" class="stopping_mode" name="stopping_mode" value="station"/>选站经停</label>
                                    </td>
                                    <td valign="top">
                                        <div class="showInfo">
                                            <table class="station_info">
                                                <t t-foreach="widget.express_info.station" t-as="station_list">
                                                    <tr>
                                                        <t t-foreach="station_list" t-as="station">
                                                            <td>
                                                                <label>
                                                                    <input type="checkbox" t-att-value="station.id" />
                                                                    <t t-esc="station.name"></t>
                                                                </label>
                                                            </td>
                                                        </t>
                                                    </tr>
                                                </t>
                                            </table>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </form>
                    <a href="javascript:;" class="sendbt">发车</a>
                </div>
                <script type="text/javascript">
                    $(function(){
                        $(".express_train .express_train_info").on("change", ".bus_mode", function(){
                            var v = this.value;
                            $(".express_train .express_train_part select").val('');
                            $(".express_train .express_train_part select .opset").hide();
                            $(".express_train .express_train_part select ."+v+"_op").show();
                        });
                        $(".express_train .select_part_info").on("click", ".stopping_mode", function(){
                            $(".express_train .select_part_info .showInfo").hide();
                            var stopping_mode_v= this.value;
                            $(this).parents("tr").find(".showInfo").show();
                        });
                    })
                </script>
            </div>
        </div>
    </t>
</templates>